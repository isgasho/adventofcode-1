<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
<body></body><script>
window.onload = function() {

    c = d3.select("body")
        .append("canvas")
        .attr("width", 1000)
        .attr("height", 1000)
        .style("background", "#000")

    ctx = c.node().getContext("2d");

    container = document.createElement("custom");

    d3.select(container).selectAll("custom.rect")
        .data(data)
        .enter()
        .append("custom")
        .each(function(d,i){d=d.match(/(.*) (.*),(.*) (.*?) (.*),(.*)/)
            //.style("mix-blend-mode",d[1]=="toggle"?"difference":"normal")

            ctx.beginPath();
            if(d[1]=="toggle") {
                // ctx.fillStyle = "#FFF";
                // ctx.fillRect(d[2], d[3], d[5]-d[2], d[6]-d[3]);
                // ctx.globalCompositeOperation = 'xor';
            }
            else if (d[1]=="turn on") {
                ctx.fillStyle = "#FFF";
                ctx.globalCompositeOperation="source-over";
                ctx.fillRect(d[2], d[3], d[5]-d[2], d[6]-d[3]);
            }
            else {
                ctx.fillStyle = "#000";
                //ctx.globalCompositeOperation="source-over";
                ctx.fillRect(d[2], d[3], d[5]-d[2], d[6]-d[3]);
            }
            ctx.closePath();

        })

}

_='data="turn off 6@5D`104M	$E9UB193258-7585A81{/6<vqy&2903`329z1}9H-7	qy*I64%870T3	02/39z41>5#18-9	]313~32>3014<07U30!IW!4089!Z93[$E708QP12902U614J1>8503m7S6bB7	W<+121	Yx~888?31N8C	C<6	$GVG143L>q87jH643570*~1:ME2#9&?-8X46659>7]?54Zw89H92789Y|`:7<6C1	7Rk336876y*6839I?8m!4N03T&0	LVJ9[QP7810xD!266w25Y66893jm5	S^	^!92<R664	E*3	652x3L1871/1M6666#b64@K9A-2`51762I`6#1#7JC?6yj07*	X61{B531:x70#86[5>7%51251zb784293[N[$	*#9QGq3E49870H	MJ11356641D!Xc?1G31_31$58F1356TCLFD:B71JF8	Mk8:*FyA[Z57Pb13L546SO	27_8!j9D*76S192HG8D023K6V2|7WI:7	43<126v64	^@5	+@3DP6c?2P	!J3m02	:N8:M%804RN0:X*%6QB81593G!6_TNy/2]642C?08>5:G$6cG9j25K529/	B2V7A1	WC6~213[%31^5F42v4*04F7B42D8D7U6503I1W4392&3A0808ZS8	L&9Xv	091%0bw2^3F0493C	424Y65OP8B#	m8/5150252>#1[V|1@	12H3$81&^80~!3YN2k4<_517	B4F5351	*K0	76A%N29302	78Y6|-6?8O9b+2Q5z1WN7{09	?#4_z1D]10861}y+6509C74N2D92C12J6760903K5KA4	3!HU59N4ZE3HU	X/78P431!UL68/04*5??88PH621&7Rv%5{!545>Q2v}0G560x@7TU291#	YF1j/6	7c7@	E|8&K/227wq6	TX*9&&54BE3mQ%4kBx+&5B@6OSqP6%M$L4SFV9P35870I0510b/8:N947>#9{:49#9@4<646!02T6	wk0>7/W/}4_54SV	49462<61	566V0-2:[9]LQ1}GYE5+HR15	7cE7	`43C_2-7wK121A$K104P?7127393	G2LQ+vD136|56627~	886{`$	@6T^04^5+J	5?01`%x{3Q1/z7Z1OAbB861z4+<6XA254~$1	38066924U3q5>8&}027>8/0493@3<49Y<949q427G8J88568|PV6D0371y*5?895+k292D&b68W	J1ZS-8|9+-8I4#6	X4*wT	%4%]5#0129F1kGZ142A	O5O:x78_mR-1]5@!S	KF42	54_IR0772-8	%9$M-bB4Z00x6<7I0>T2C]M801-9Q!X}16$-2	435$MZ4IO0978M2&E4JH7Xk@A9{3508@5U#1>K*!4+3I8825c$9M1>k6JOm1ED2B46194mI881-82c`4Y4c7@5+#1%701	Wj5VF2$112}jj1wHYR3&?2]3:4*9<94^75E$%3	v!35y71	z4	CA6Q&7J854	VK7/A888S5	v184RwO9LWR2L32>3E:3C03O7<-3&@25*5c#1+-41[G87]$	4+R21	C66_H8c$`U56^+%W7	12A12F:714#6z8!7%	71/	q4T+&	O592712<~+".split(";"); through ;turn o;toggle ff n ,99,7	,8,6,5,4,3,28,17652887945803417363032!48#44$50%15&40*63+75-7/22:84<96>1?47@60A37B46C82D86E19F20G89H57I59J67K10L14M38N39O62P69Q79R11S23T24U33V53W77X85Y95Z26[52]72^83_91`97b4c1j16k55m73q90v99w05x9y2z{41|74}98~0600';for(Y in $='~}|{zyxwvqmkjcb`_^][ZYXWVUTSRQPONMLKJIHGFEDCBA@?><:/-+*&%$#!	')with(_.split($[Y]))_=join(pop());eval(_) ;   d3.select('svg').style("width",1e3).style("height",1e3).style("background","#000");d3.select("g").selectAll("r").data(data).enter().append("rect").each(function(a,b){a=a.match(/(.*) (.*),(.*) (.*?) (.*),(.*)/);d3.select(this).attr("x",a[2]).attr("y",a[3]).attr("width",a[5]-a[2]).attr("height",a[6]-a[3]).attr("fill","turn off"==a[1]?"#000":"#FFF").style("mix-blend-mode","toggle"==a[1]?"difference":"normal")});</script>
